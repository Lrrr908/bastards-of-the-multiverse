<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BASTARDS//MULTIVERSE - SYSTEM ACCESS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
    
    :root {
      --primary: #00ff41;
      --secondary: #ff0080;
      --accent: #00d4ff;
      --bg: #000000;
      --grid: rgba(0, 255, 65, 0.1);
      --glow: rgba(0, 255, 65, 0.4);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background: #000;
      color: var(--primary);
      font-family: 'Orbitron', monospace;
      overflow-x: hidden;
      position: relative;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: 
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 255, 65, 0.03) 2px, rgba(0, 255, 65, 0.03) 4px),
        repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0, 255, 65, 0.03) 2px, rgba(0, 255, 65, 0.03) 4px);
      pointer-events: none;
      z-index: 1;
    }

    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background: linear-gradient(180deg, transparent 0%, rgba(0, 255, 65, 0.05) 50%, transparent 100%);
      animation: scan 4s linear infinite;
      pointer-events: none;
      z-index: 2;
    }

    @keyframes scan {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }

    .container {
      position: relative;
      z-index: 3;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    /* HEADER */
    header {
      border-bottom: 2px solid var(--primary);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(10px);
      z-index: 100;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo-mark {
      width: 50px;
      height: 50px;
      border: 2px solid var(--primary);
      background: transparent;
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      box-shadow: 0 0 20px var(--glow);
      animation: pulse 2s ease-in-out infinite;
      position: relative;
    }

    .logo-mark::before {
      content: "";
      position: absolute;
      inset: 8px;
      border: 1px solid var(--primary);
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      opacity: 0.5;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.05); }
    }

    .logo-text h1 {
      font-size: 1.5rem;
      font-weight: 900;
      letter-spacing: 0.2em;
      text-shadow: 0 0 10px var(--glow);
    }

    .logo-text .sub {
      font-size: 0.7rem;
      color: var(--accent);
      letter-spacing: 0.3em;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      font-size: 0.9rem;
      letter-spacing: 0.15em;
    }

    .nav-links a {
      color: var(--primary);
      text-decoration: none;
      position: relative;
      padding: 0.5rem 0;
      transition: all 0.3s;
      cursor: pointer;
    }

    .nav-links a::before {
      content: ">";
      position: absolute;
      left: -15px;
      opacity: 0;
      transition: all 0.3s;
    }

    .nav-links a:hover {
      color: var(--secondary);
      text-shadow: 0 0 10px var(--secondary);
    }

    .nav-links a:hover::before {
      opacity: 1;
      left: -20px;
    }

    /* SECTION ANIMATIONS */
    section {
      opacity: 0;
      transform: translateY(50px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* HERO SECTION */
    .hero {
      padding: 4rem 0;
      position: relative;
      min-height: 90vh;
      display: flex;
      align-items: center;
    }

    .hero-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: center;
    }

    .system-label {
      font-size: 0.7rem;
      color: var(--accent);
      letter-spacing: 0.3em;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .system-label::before {
      content: "";
      width: 30px;
      height: 2px;
      background: var(--accent);
    }

    .hero h2 {
      font-size: 3.5rem;
      font-weight: 900;
      line-height: 1.1;
      letter-spacing: 0.05em;
      text-shadow: 0 0 20px var(--glow);
      margin-bottom: 1.5rem;
    }

    .hero h2 .highlight {
      color: var(--secondary);
      text-shadow: 0 0 20px rgba(255, 0, 128, 0.6);
    }

    .hero-desc {
      font-size: 1rem;
      line-height: 1.8;
      color: rgba(0, 255, 65, 0.8);
      margin-bottom: 2rem;
      max-width: 500px;
    }

    .cta-buttons {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .btn {
      padding: 1rem 2rem;
      border: 2px solid var(--primary);
      background: transparent;
      color: var(--primary);
      font-family: 'Orbitron', monospace;
      font-weight: 700;
      letter-spacing: 0.15em;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all 0.3s;
    }

    .btn::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--primary);
      transition: all 0.3s;
      z-index: -1;
    }

    .btn:hover {
      color: #000;
      box-shadow: 0 0 20px var(--glow);
    }

    .btn:hover::before {
      left: 0;
    }

    .btn-secondary {
      border-color: var(--secondary);
      color: var(--secondary);
    }

    .btn-secondary::before {
      background: var(--secondary);
    }

    .system-note {
      font-size: 0.75rem;
      color: rgba(0, 255, 65, 0.6);
      padding: 1rem;
      border-left: 2px solid var(--accent);
      background: rgba(0, 255, 65, 0.05);
    }

    /* VISUAL PANEL */
    .visual-panel {
      border: 2px solid var(--primary);
      padding: 1.5rem;
      position: relative;
      background: rgba(0, 255, 65, 0.03);
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      font-size: 0.8rem;
      letter-spacing: 0.2em;
    }

    .status-dot {
      width: 10px;
      height: 10px;
      background: var(--primary);
      border-radius: 50%;
      box-shadow: 0 0 10px var(--primary);
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .preview-box {
      aspect-ratio: 4/3;
      background: #000;
      border: 1px solid rgba(0, 255, 65, 0.3);
      position: relative;
      overflow: hidden;
    }

    .preview-box canvas {
      width: 100%;
      height: 100%;
    }

    .color-chips {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    .chip {
      padding: 0.5rem 1rem;
      border: 1px solid var(--primary);
      font-size: 0.7rem;
      letter-spacing: 0.1em;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .chip-color {
      width: 15px;
      height: 15px;
      border: 1px solid var(--primary);
    }

    /* SECTIONS */
    .section {
      padding: 4rem 0;
      border-top: 1px solid rgba(0, 255, 65, 0.2);
      min-height: 100vh;
      display: flex;
      align-items: center;
    }

    .section-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
    }

    .section-header h3 {
      font-size: 2rem;
      font-weight: 900;
      margin-bottom: 1rem;
      text-shadow: 0 0 10px var(--glow);
    }

    .section-text {
      font-size: 0.95rem;
      line-height: 1.8;
      color: rgba(0, 255, 65, 0.8);
    }

    .data-card {
      border: 2px solid var(--primary);
      padding: 1.5rem;
      background: rgba(0, 255, 65, 0.03);
      position: relative;
    }

    .data-card::before {
      content: attr(data-id);
      position: absolute;
      top: -12px;
      left: 1rem;
      background: #000;
      padding: 0 0.5rem;
      font-size: 0.7rem;
      color: var(--accent);
      letter-spacing: 0.2em;
    }

    .card-title {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--primary);
    }

    .feature-list {
      list-style: none;
      font-size: 0.85rem;
      line-height: 1.8;
      color: rgba(0, 255, 65, 0.8);
    }

    .feature-list li {
      padding-left: 1.5rem;
      position: relative;
      margin-bottom: 0.5rem;
    }

    .feature-list li::before {
      content: "▸";
      position: absolute;
      left: 0;
      color: var(--secondary);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-top: 1rem;
    }

    .stat-box {
      border: 1px solid var(--primary);
      padding: 1rem;
      background: rgba(0, 0, 0, 0.5);
    }

    .stat-label {
      font-size: 0.7rem;
      color: var(--accent);
      letter-spacing: 0.15em;
      margin-bottom: 0.25rem;
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 700;
    }

    /* COLOR MATCH WIDGET INTEGRATION */
    #colormatch {
      background: rgba(0, 255, 65, 0.02);
      border-top: 2px solid var(--primary);
      border-bottom: 2px solid var(--primary);
      padding: 4rem 0;
      min-height: 100vh;
    }

    .cmw-wrap {
      font-family: 'Orbitron', monospace !important;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      background: transparent !important;
    }

    .cmw-wrap h5 {
      font-size: 2.5rem;
      margin: 0 0 32px;
      font-weight: 900;
      color: var(--primary);
      text-align: center;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      text-shadow: 0 0 20px var(--glow);
    }

    .cmw-section {
      margin-bottom: 24px;
      padding: 24px;
      border: 2px solid var(--primary);
      border-radius: 0;
      background: rgba(0, 255, 65, 0.03);
      box-shadow: 0 0 20px var(--glow);
      transition: all 0.3s;
    }

    .cmw-section:hover {
      border-color: var(--accent);
      box-shadow: 0 0 30px var(--glow);
    }

    .cmw-section h6 {
      font-size: 1.1rem;
      margin: 0 0 20px;
      font-weight: 600;
      color: var(--primary);
      text-align: center;
      letter-spacing: 0.15em;
    }

    .cmw-input-group {
      display: flex;
      flex-direction: column;
      gap: 16px;
      align-items: center;
    }

    .cmw-values-section {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .cmw-value-type-selector {
      display: flex;
      justify-content: center;
      margin-bottom: 16px;
    }

    .cmw-value-type-select {
      padding: 12px 16px;
      font-size: 16px;
      border: 2px solid var(--primary);
      border-radius: 0;
      background: rgba(0, 0, 0, 0.8);
      color: var(--primary);
      cursor: pointer;
      min-width: 180px;
      text-align: center;
      font-family: 'Orbitron', monospace;
    }

    .cmw-value-type-select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 10px var(--glow);
    }

    .cmw-color-preview-container {
      display: flex;
      align-items: flex-start;
      justify-content: center;
      gap: 20px;
      margin: 16px auto;
      flex-wrap: wrap;
      min-height: 80px;
      position: relative;
    }

    .cmw-color-preview {
      width: 60px;
      height: 60px;
      border: 3px solid var(--primary);
      border-radius: 0;
      background: rgba(0, 0, 0, 0.8);
      transition: all 0.3s ease;
      position: relative;
      display: block;
      flex-shrink: 0;
      box-shadow: 0 0 15px var(--glow);
    }

    .cmw-selected-color-info {
      display: none;
      flex-direction: column;
      gap: 12px;
      padding: 16px;
      background: rgba(0, 255, 65, 0.05);
      border: 2px solid var(--primary);
      border-radius: 0;
      min-width: 180px;
      max-width: 250px;
      flex-shrink: 0;
      position: relative;
    }

    .cmw-selected-color-info.show {
      display: flex;
    }

    .cmw-selected-color-library {
      font-size: 15px;
      color: var(--primary);
      text-align: center;
      font-weight: 600;
    }

    .cmw-selected-color-lab {
      font-size: 13px;
      color: var(--accent);
      text-align: center;
      font-family: 'Courier New', monospace;
      background: rgba(0, 0, 0, 0.8);
      padding: 8px;
      border-radius: 0;
      border: 1px solid var(--primary);
    }

    .cmw-value-inputs {
      display: none;
      justify-content: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .cmw-value-inputs.active {
      display: flex;
    }

    .cmw-wrap input {
      padding: 12px 16px;
      font-size: 16px;
      border: 2px solid var(--primary);
      border-radius: 0;
      transition: all 0.2s;
      background: rgba(0, 0, 0, 0.8);
      color: var(--primary);
      width: 100%;
      max-width: 350px;
      font-family: 'Orbitron', monospace;
    }

    .cmw-wrap input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 10px var(--glow);
    }

    .cmw-wrap button {
      padding: 12px 32px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      border: 2px solid var(--primary);
      background: transparent;
      color: var(--primary);
      border-radius: 0;
      transition: all 0.3s;
      white-space: nowrap;
      font-family: 'Orbitron', monospace;
      position: relative;
      overflow: hidden;
    }

    .cmw-wrap button::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--primary);
      transition: all 0.3s;
      z-index: -1;
    }

    .cmw-wrap button:hover {
      color: #000;
      box-shadow: 0 0 20px var(--glow);
    }

    .cmw-wrap button:hover::before {
      left: 0;
    }

    .cmw-library-toggles {
      margin-bottom: 24px;
      padding: 20px;
      background: rgba(0, 255, 65, 0.03);
      border: 2px solid var(--primary);
      border-radius: 0;
      box-shadow: 0 0 15px var(--glow);
    }

    .cmw-toggle-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }

    .cmw-toggle-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 0;
      transition: all 0.2s;
      border: 2px solid transparent;
    }

    .cmw-toggle-item:hover {
      background: rgba(0, 255, 65, 0.1);
      border-color: var(--primary);
    }

    .cmw-toggle-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
      accent-color: var(--primary);
    }

    .cmw-wrap table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 24px;
      background: rgba(0, 0, 0, 0.8);
      border-radius: 0;
      overflow: hidden;
      border: 2px solid var(--primary);
    }

    .cmw-wrap th,
    .cmw-wrap td {
      padding: 12px;
      border-bottom: 1px solid var(--primary);
      font-size: 14px;
      text-align: left;
      color: var(--primary);
    }

    .cmw-wrap th {
      background: rgba(0, 255, 65, 0.1);
      font-weight: 600;
      color: var(--primary);
    }

    /* COORDINATES */
    .coordinates {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      font-size: 0.7rem;
      color: rgba(0, 255, 65, 0.5);
      letter-spacing: 0.1em;
      z-index: 50;
      font-family: monospace;
    }

    /* FOOTER */
    footer {
      border-top: 2px solid var(--primary);
      padding: 2rem 0;
      margin-top: 4rem;
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
      font-size: 0.8rem;
    }

    .footer-links {
      display: flex;
      gap: 2rem;
    }

    .footer-links a {
      color: var(--primary);
      text-decoration: none;
      transition: all 0.3s;
      cursor: pointer;
    }

    .footer-links a:hover {
      color: var(--secondary);
      text-shadow: 0 0 10px var(--secondary);
    }

    @media (max-width: 768px) {
      .hero-grid,
      .section-grid {
        grid-template-columns: 1fr;
        gap: 2rem;
      }

      .nav-links {
        display: none;
      }

      .hero h2 {
        font-size: 2rem;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Additional CMW styles from original */
    .cmw-lab-group,
    .cmw-cmyk-group,
    .cmw-rgb-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .cmw-lab-input,
    .cmw-cmyk-input,
    .cmw-rgb-input {
      width: 80px !important;
      max-width: 80px !important;
      text-align: center;
    }

    .cmw-lab-label,
    .cmw-cmyk-label,
    .cmw-rgb-label {
      font-weight: 600;
      color: var(--primary);
      font-size: 14px;
    }

    .cmw-loading {
      display: none;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 20px 0;
      color: var(--accent);
    }

    .cmw-loading.show {
      display: flex;
    }

    .cmw-spinner {
      width: 20px;
      height: 20px;
      border: 2px solid var(--grid);
      border-top: 2px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .cmw-status {
      margin: 16px 0;
      padding: 12px;
      border-radius: 0;
      display: none;
      text-align: center;
      font-weight: 500;
      border: 2px solid;
    }

    .cmw-status.success {
      background: rgba(0, 255, 65, 0.1);
      color: var(--primary);
      border-color: var(--primary);
    }

    .cmw-status.error {
      background: rgba(255, 0, 128, 0.1);
      color: var(--secondary);
      border-color: var(--secondary);
    }

    .cmw-status.warning {
      background: rgba(0, 212, 255, 0.1);
      color: var(--accent);
      border-color: var(--accent);
    }

    .cmw-status.show {
      display: block;
    }

    .cmw-swatch {
      width: 60px;
      height: 30px;
      border: 1px solid var(--primary);
      border-radius: 0;
    }

    .cmw-suggestions {
      margin-top: 12px;
      padding: 0;
      background: rgba(0, 0, 0, 0.9);
      border: 1px solid var(--primary);
      border-radius: 0;
      display: none;
      box-shadow: 0 0 20px var(--glow);
      max-width: 350px;
      width: 100%;
      max-height: 300px;
      overflow-y: auto;
      position: relative;
      z-index: 100;
    }

    .cmw-suggestions.show {
      display: block;
    }

    .cmw-suggestions-header {
      position: sticky;
      top: 0;
      background: rgba(0, 255, 65, 0.1);
      padding: 12px;
      font-weight: 600;
      color: var(--primary);
      border-bottom: 1px solid var(--primary);
      z-index: 10;
    }

    .cmw-suggestion {
      cursor: pointer;
      padding: 12px 16px;
      margin: 2px 0;
      border-radius: 0;
      transition: background 0.1s ease;
      color: var(--primary);
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid var(--primary);
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      -webkit-user-select: none;
      position: relative;
    }

    .cmw-suggestion:hover {
      background: rgba(0, 255, 65, 0.2);
      color: var(--primary);
      border-color: var(--accent);
    }

    .cmw-brand-hint {
      color: var(--accent);
      font-size: 0.9em;
    }
  </style>
</head>
<body>

  <header>
    <div class="header-content">
      <div class="logo-section">
        <div class="logo-mark"></div>
        <div class="logo-text">
          <h1>BASTARDS//MV</h1>
          <div class="sub">SYSTEM ONLINE</div>
        </div>
      </div>
      <nav class="nav-links">
        <a onclick="scrollToSection('figures')">FIGURES</a>
        <a onclick="scrollToSection('colorlab')">COLOR.LAB</a>
        <a onclick="scrollToSection('colormatch')">COLOR.MATCH</a>
        <a onclick="scrollToSection('protocol')">PROTOCOL</a>
        <a onclick="scrollToSection('contact')">CONTACT</a>
      </nav>
    </div>
  </header>

  <div class="container">
    
    <!-- HERO -->
    <section class="hero visible">
      <div class="hero-grid">
        <div>
          <div class="system-label">CUSTOM 3D FABRICATION SYSTEM</div>
          <h2>DESIGN YOUR <span class="highlight">BASTARD</span>. MATCH YOUR COLOR. BUILD FOR REAL.</h2>
          <p class="hero-desc">
            One person toy lab. Custom sculpted multiverse misfits powered by BotMCMS color engine. 
            Real resin, filament, and Bastone spot matching. Every build handled direct.
          </p>
          <div class="cta-buttons">
            <button class="btn" onclick="scrollToSection('figures')">INITIALIZE FIGURE</button>
            <button class="btn btn-secondary" onclick="scrollToSection('colormatch')">ACCESS COLOR.MATCH</button>
          </div>
          <div class="system-note">
            >> NO CART. NO CHECKOUT. Generate project link → DM on Instagram → Human builds it.
          </div>
        </div>

        <div class="visual-panel">
          <div class="panel-header">
            <span>LIVE PREVIEW [MOCK]</span>
            <div style="display: flex; align-items: center; gap: 0.5rem;">
              <span class="status-dot"></span>
              <span>BOTMCMS ACTIVE</span>
            </div>
          </div>
          <div class="preview-box">
            <canvas id="colorWheel"></canvas>
          </div>
          <div class="color-chips">
            <div class="chip">
              <div class="chip-color" style="background:#FFC845;"></div>
              BASTONE 123C
            </div>
            <div class="chip">
              <div class="chip-color" style="background:#FFCC4A;"></div>
              ESUN PLA+ WARM
            </div>
            <div class="chip">
              <div class="chip-color" style="background:#F8C94D;"></div>
              SIRAYA FAST YELLOW
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION: WHAT THIS IS -->
    <section class="section" id="figures">
      <div class="section-grid">
        <div>
          <div class="system-label">SYSTEM OVERVIEW</div>
          <div class="section-header">
            <h3>TOY LAB. COLOR BRAIN. DIRECT DM ORDERING.</h3>
          </div>
          <p class="section-text">
            Not a generic storefront. Bastards of the Multiverse is a focused setup for people who care about 
            aesthetic and color accuracy. Three core systems working together.
          </p>
        </div>

        <div class="data-card" data-id="[CORE.SYSTEMS]">
          <div class="card-title">THREE PILLARS ARCHITECTURE</div>
          <ul class="feature-list">
            <li><strong>CUSTOM FIGURES</strong> — Sculpted and printed in house. Modular parts. Full color zone control.</li>
            <li><strong>BOTMCMS ENGINE</strong> — LittleCMS powered brain. Understands Bastone C, resin, filament, hex, RGB, CMYK, paint chips.</li>
            <li><strong>COLOR.MATCH</strong> — Input any color. Get real material matches with delta E accuracy ratings.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- SECTION: COLOR LAB -->
    <section class="section" id="colorlab">
      <div class="section-grid">
        <div>
          <div class="system-label">COLOR.LAB PROTOCOL</div>
          <div class="section-header">
            <h3>BASTONE TARGETS → REAL MATERIALS</h3>
          </div>
          <p class="section-text">
            Paste Bastone code, Pantone number, hex, CMYK, RGB, or paint color. Lab converts to Lab colorspace, 
            locks Bastone reference, finds closest resins and filaments with delta E traffic lights.
          </p>
        </div>

        <div class="data-card" data-id="[LAB.EXAMPLE]">
          <div class="card-title">BASTONE 123C MATCH SEQUENCE</div>
          <ul class="feature-list">
            <li>Input: 123C, PMS 123C, hex, RGB, CMYK, paint name</li>
            <li>BotMCMS resolves to <strong>BASTONE 123C</strong> reference</li>
            <li>Materials pulled from curated libraries + Amazon links</li>
          </ul>
          <div class="stats-grid">
            <div class="stat-box">
              <div class="stat-label">RESIN MATCH</div>
              <div class="stat-value">ΔE 2.7</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">FILAMENT MATCH</div>
              <div class="stat-value">ΔE 1.3</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- COLOR MATCH WIDGET SECTION -->
  <section id="colormatch">
    <div class="cmw-wrap">
      <h5>+COLOR MATCH</h5>
      
      <input type="hidden" id="cmw-api-url" value="https://botm-ucxq.onrender.com">
      
      <div class="cmw-library-toggles">
        <h6>Color Libraries</h6>
        <div class="cmw-toggle-grid">
          <div class="cmw-toggle-item">
            <input type="checkbox" id="toggle-pantone" value="pantone" checked>
            <label for="toggle-pantone">Pantone <span class="cmw-library-count" id="count-pantone">(loading...)</span></label>
          </div>
          <div class="cmw-toggle-item">
            <input type="checkbox" id="toggle-behr" value="behr" checked>
            <label for="toggle-behr">Behr <span class="cmw-library-count" id="count-behr">(loading...)</span></label>
          </div>
          <div class="cmw-toggle-item">
            <input type="checkbox" id="toggle-sherwin" value="sherwin" checked>
            <label for="toggle-sherwin">Sherwin Williams <span class="cmw-library-count" id="count-sherwin">(loading...)</span></label>
          </div>
          <div class="cmw-toggle-item">
            <input type="checkbox" id="toggle-bm" value="bm" checked>
            <label for="toggle-bm">Benjamin Moore <span class="cmw-library-count" id="count-bm">(loading...)</span></label>
          </div>
        </div>
        
        <div style="height: 1px; background: linear-gradient(to right, transparent, rgba(0, 255, 65, 0.2) 20%, rgba(0, 255, 65, 0.2) 80%, transparent); margin: 20px 0;"></div>
        
        <div style="display: flex; justify-content: center; align-items: center; gap: 24px; margin-top: 16px; flex-wrap: wrap;">
          <div style="display: flex; align-items: center; gap: 8px;">
            <label for="cmw-results-count" style="font-weight: 600; color: var(--primary); white-space: nowrap;">Results per library:</label>
            <select id="cmw-results-count" class="cmw-value-type-select" style="min-width: 80px;">
              <option value="1" selected>1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="5">5</option>
              <option value="10">10</option>
            </select>
          </div>
        </div>
      </div>
      
      <div class="cmw-section">
        <h6>Color Search</h6>
        <div class="cmw-input-group">
          <div class="cmw-values-section">
            <div class="cmw-value-type-selector">
              <select id="cmw-search-type-select" class="cmw-value-type-select">
                <option value="name" selected>Color Number or Hex</option>
                <option value="lab">Lab Values</option>
                <option value="cmyk">CMYK Values</option>
                <option value="rgb">RGB Values</option>
              </select>
            </div>

            <div class="cmw-color-preview-container">
              <div id="cmw-color-preview" class="cmw-color-preview"></div>
              <div id="cmw-selected-color-info" class="cmw-selected-color-info">
                <div id="cmw-selected-color-library" class="cmw-selected-color-library"></div>
                <div id="cmw-selected-color-lab" class="cmw-selected-color-lab"></div>
              </div>
            </div>

            <div id="cmw-name-inputs" class="cmw-value-inputs active">
              <input id="cmw-name-input" class="cmw-name-input" placeholder="Enter color number or hex (e.g., PANTONE 185 C, Behr 3405, #FF0000)">
            </div>
            <div id="cmw-name-suggestions" class="cmw-suggestions">
              <div class="cmw-suggestions-header">Suggestions:</div>
              <div class="cmw-suggestions-content"></div>
            </div>

            <div id="cmw-lab-inputs" class="cmw-value-inputs">
              <div class="cmw-lab-group">
                <span class="cmw-lab-label">L*</span>
                <input id="cmw-lab-l" class="cmw-lab-input" type="number" placeholder="0-100" min="0" max="100" step="0.1">
              </div>
              <div class="cmw-lab-group">
                <span class="cmw-lab-label">a*</span>
                <input id="cmw-lab-a" class="cmw-lab-input" type="number" placeholder="-128-127" min="-128" max="127" step="0.1">
              </div>
              <div class="cmw-lab-group">
                <span class="cmw-lab-label">b*</span>
                <input id="cmw-lab-b" class="cmw-lab-input" type="number" placeholder="-128-127" min="-128" max="127" step="0.1">
              </div>
            </div>

            <div id="cmw-cmyk-inputs" class="cmw-value-inputs">
              <div class="cmw-cmyk-group">
                <span class="cmw-cmyk-label">C</span>
                <input id="cmw-cmyk-c" class="cmw-cmyk-input" type="number" placeholder="0-100" min="0" max="100" step="0.1">
              </div>
              <div class="cmw-cmyk-group">
                <span class="cmw-cmyk-label">M</span>
                <input id="cmw-cmyk-m" class="cmw-cmyk-input" type="number" placeholder="0-100" min="0" max="100" step="0.1">
              </div>
              <div class="cmw-cmyk-group">
                <span class="cmw-cmyk-label">Y</span>
                <input id="cmw-cmyk-y" class="cmw-cmyk-input" type="number" placeholder="0-100" min="0" max="100" step="0.1">
              </div>
              <div class="cmw-cmyk-group">
                <span class="cmw-cmyk-label">K</span>
                <input id="cmw-cmyk-k" class="cmw-cmyk-input" type="number" placeholder="0-100" min="0" max="100" step="0.1">
              </div>
            </div>

            <div id="cmw-rgb-inputs" class="cmw-value-inputs">
              <div class="cmw-rgb-group">
                <span class="cmw-rgb-label">R</span>
                <input id="cmw-rgb-r" class="cmw-rgb-input" type="number" placeholder="0-255" min="0" max="255">
              </div>
              <div class="cmw-rgb-group">
                <span class="cmw-rgb-label">G</span>
                <input id="cmw-rgb-g" class="cmw-rgb-input" type="number" placeholder="0-255" min="0" max="255">
              </div>
              <div class="cmw-rgb-group">
                <span class="cmw-rgb-label">B</span>
                <input id="cmw-rgb-b" class="cmw-rgb-input" type="number" placeholder="0-255" min="0" max="255">
              </div>
            </div>
          </div>
          <button id="cmw-search-btn">Search</button>
        </div>
      </div>

      <div id="cmw-loading" class="cmw-loading">
        <div class="cmw-spinner"></div>
        <span>Searching...</span>
      </div>

      <div id="cmw-status" class="cmw-status"></div>

      <table id="cmw-out" hidden>
        <thead>
          <tr>
            <th>Swatch</th>
            <th>Name</th>
            <th>Brand</th>
            <th>ΔE</th>
            <th>Lab</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <div class="container">
    <!-- SECTION: ORDERING PROTOCOL -->
    <section class="section" id="protocol">
      <div class="section-grid">
        <div>
          <div class="system-label">ORDER PROTOCOL</div>
          <div class="section-header">
            <h3>BUILD ONLINE. FINISH IN DMS.</h3>
          </div>
          <p class="section-text">
            Site = design interface. Instagram = human coordination. No automated cart. No auto charges. 
            Just clear project link and direct communication.
          </p>
        </div>

        <div class="data-card" data-id="[ORDER.FLOW]">
          <div class="card-title">PROJECT SEQUENCE</div>
          <ul class="feature-list">
            <li>Configure figure, pick colors, generate unique project link</li>
            <li>DM link to Instagram. Confirm price, scope, lead time</li>
            <li>Pay via PayPal. Project page updates: payment received</li>
            <li>Build stages: print → clean → paint → coat → pack → ship</li>
            <li>Final update: tracking number + finished photos</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- SECTION: CONTACT -->
    <section class="section" id="contact">
      <div class="section-grid">
        <div>
          <div class="system-label">DIRECT CHANNEL</div>
          <div class="section-header">
            <h3>DM TO START PROJECT</h3>
          </div>
          <p class="section-text">
            Custom build, color match for client project, or nerd out about color and toys. 
            Send DM on Instagram. Project links keep everything organized.
          </p>
        </div>

        <div class="data-card" data-id="[CONTACT.PRIMARY]">
          <div class="card-title">@YOUR_INSTAGRAM_HANDLE</div>
          <p class="section-text" style="margin-bottom: 1rem;">
            DM with project link or rough idea. Reply includes:
          </p>
          <ul class="feature-list">
            <li>Estimated lead time + price</li>
            <li>Questions: colors, size, finish</li>
            <li>PayPal info + milestone update protocol</li>
          </ul>
        </div>
      </div>
    </section>

  </div>

  <footer>
    <div class="footer-content">
      <div>
        BASTARDS OF THE MULTIVERSE /// ONE PERSON TOY LAB /// COLOR MATH BY BOTMCMS /// EST.2024
      </div>
      <div class="footer-links">
        <a onclick="scrollToSection('colorlab')">COLOR.LAB</a>
        <a onclick="scrollToSection('colormatch')">COLOR.MATCH</a>
        <a onclick="scrollToSection('protocol')">ORDERING</a>
      </div>
    </div>
  </footer>

  <div class="coordinates">
    LAT: 38.0486° N | LONG: -84.5037° W | SYSTEM.TIME: <span id="time"></span>
  </div>

  <script>
    // Smooth scroll to section
    function scrollToSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    // Intersection Observer for section animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, observerOptions);

    // Observe all sections
    document.querySelectorAll('section').forEach(section => {
      observer.observe(section);
    });

    // Time display
    function updateTime() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      document.getElementById('time').textContent = `${hours}:${minutes}:${seconds}`;
    }
    setInterval(updateTime, 1000);
    updateTime();

    // 3D Color Wheel
    const canvas = document.getElementById('colorWheel');
    const ctx = canvas.getContext('2d');
    
    function resize() {
      const box = canvas.parentElement;
      canvas.width = box.offsetWidth;
      canvas.height = box.offsetHeight;
    }
    resize();
    window.addEventListener('resize', resize);

    let rotation = 0;
    let rotationSpeed = 0.005;
    let isDragging = false;
    let lastMouseX = 0;
    let mouseVelocity = 0;
    let tilt = 0;
    let targetTilt = 0;

    canvas.addEventListener('mousedown', (e) => {
      isDragging = true;
      lastMouseX = e.clientX;
      mouseVelocity = 0;
    });

    canvas.addEventListener('mousemove', (e) => {
      if (isDragging) {
        const deltaX = e.clientX - lastMouseX;
        mouseVelocity = deltaX * 0.01;
        rotation += mouseVelocity;
        lastMouseX = e.clientX;
        
        const rect = canvas.getBoundingClientRect();
        const mouseY = e.clientY - rect.top;
        targetTilt = ((mouseY / rect.height) - 0.5) * 0.8;
      }
    });

    canvas.addEventListener('mouseup', () => {
      isDragging = false;
    });

    canvas.addEventListener('mouseleave', () => {
      isDragging = false;
      targetTilt = 0;
    });

    canvas.style.cursor = 'grab';
    canvas.addEventListener('mousedown', () => canvas.style.cursor = 'grabbing');
    canvas.addEventListener('mouseup', () => canvas.style.cursor = 'grab');

    function drawColorWheel() {
      const w = canvas.width;
      const h = canvas.height;
      const cx = w / 2;
      const cy = h / 2;
      const radius = Math.min(w, h) * 0.42;

      ctx.fillStyle = '#000';
      ctx.fillRect(0, 0, w, h);

      tilt += (targetTilt - tilt) * 0.1;

      if (!isDragging) {
        rotation += rotationSpeed;
        mouseVelocity *= 0.95;
      }

      const segments = 24;
      const rings = 8;

      for (let r = 0; r < rings; r++) {
        const ringRadius = (radius / rings) * (r + 1);
        
        for (let i = 0; i < segments; i++) {
          const angle1 = (i / segments) * Math.PI * 2 + rotation;
          const angle2 = ((i + 1) / segments) * Math.PI * 2 + rotation;
          
          const z1 = Math.sin(angle1) * 0.5 + 0.5;
          const z2 = Math.sin(angle2) * 0.5 + 0.5;
          
          const x1 = cx + Math.cos(angle1) * ringRadius * z1;
          const y1 = cy + (Math.sin(angle1) * ringRadius * 0.6 + tilt * ringRadius) * z1;
          const x2 = cx + Math.cos(angle2) * ringRadius * z2;
          const y2 = cy + (Math.sin(angle2) * ringRadius * 0.6 + tilt * ringRadius) * z2;

          const hue = (i / segments) * 360;
          const lightness = 40 + (r / rings) * 40;
          
          ctx.strokeStyle = `hsl(${hue}, 100%, ${lightness}%)`;
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(x1, y1);
          ctx.lineTo(x2, y2);
          ctx.stroke();

          ctx.fillStyle = `hsl(${hue}, 100%, ${lightness}%)`;
          ctx.beginPath();
          ctx.arc(x1, y1, 2, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      ctx.fillStyle = '#00ff41';
      ctx.shadowBlur = 20;
      ctx.shadowColor = '#00ff41';
      ctx.beginPath();
      ctx.arc(cx, cy, 4, 0, Math.PI * 2);
      ctx.fill();
      ctx.shadowBlur = 0;

      requestAnimationFrame(drawColorWheel);
    }

    drawColorWheel();

    // COLOR MATCH WIDGET - BOTM API CONNECTION
    const API_BASE_URL = document.getElementById('cmw-api-url')?.value || 'https://botm-ucxq.onrender.com';

    // Color libraries will be loaded from backend
    const libs = {};
    const libNames = {
      pantone: 'Pantone',
      behr: 'Behr',
      sherwin: 'Sherwin Williams',
      bm: 'Benjamin Moore'
    };

    // Load library from backend API
    async function loadLibrary(libraryName) {
      try {
        console.log(`Loading ${libraryName} library...`);
        const response = await fetch(`${API_BASE_URL}/botmcms/libraries/${libraryName}`);
        
        console.log(`${libraryName} response status:`, response.status);
        
        if (!response.ok) {
          console.warn(`Failed to load ${libraryName} library - Status: ${response.status}`);
          const errorText = await response.text();
          console.warn(`${libraryName} error:`, errorText);
          return;
        }
        
        const data = await response.json();
        console.log(`${libraryName} data received:`, data);
        
        libs[libraryName] = data.colors;
        
        // Update count in UI
        const countEl = document.getElementById(`count-${libraryName}`);
        if (countEl) {
          countEl.textContent = `(${data.count})`;
          console.log(`Updated ${libraryName} count: ${data.count}`);
        } else {
          console.warn(`Count element not found for ${libraryName}`);
        }
        
        console.log(`✅ Loaded ${libraryName}: ${data.count} colors`);
      } catch (error) {
        console.error(`Failed to load ${libraryName}:`, error);
      }
    }

    // Load all libraries on page load
    async function loadAllLibraries() {
      console.log('Starting to load all libraries...');
      console.log('API Base URL:', API_BASE_URL);
      
      showLoading(true);
      const libraryNames = ['pantone', 'behr', 'sherwin', 'bm'];
      
      console.log('Loading libraries:', libraryNames);
      
      await Promise.all(libraryNames.map(name => loadLibrary(name)));
      
      showLoading(false);
      
      console.log('Loaded libraries object:', libs);
      
      const totalColors = Object.values(libs).reduce((sum, lib) => sum + (lib?.length || 0), 0);
      
      console.log('Total colors loaded:', totalColors);
      
      if (totalColors > 0) {
        showStatus(`Loaded ${totalColors} colors from ${Object.keys(libs).length} libraries!`, 'success');
      } else {
        showStatus('No color libraries loaded. Using backend database only.', 'warning');
      }
    }

    // Call the backend API
    async function callColorMatchAPI(inputType, value) {
      try {
        showLoading(true);
        
        const response = await fetch(`${API_BASE_URL}/colormatch`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ input_type: inputType, value: value })
        });
        
        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.detail || 'API request failed');
        }
        
        const data = await response.json();
        showLoading(false);
        return data;
        
      } catch (error) {
        showLoading(false);
        showStatus(`Error: ${error.message}`, 'error');
        throw error;
      }
    }

    // UI Helper Functions
    function showLoading(show = true) {
      const loading = document.getElementById('cmw-loading');
      if (loading) loading.classList.toggle('show', show);
    }

    function showStatus(message, type = 'success') {
      const status = document.getElementById('cmw-status');
      if (status) {
        status.textContent = message;
        status.className = `cmw-status ${type} show`;
        setTimeout(() => status.classList.remove('show'), 5000);
      }
    }

    function updateColorPreview(hex, labValues = null) {
      const preview = document.getElementById('cmw-color-preview');
      if (preview) preview.style.backgroundColor = hex;
      
      const info = document.getElementById('cmw-selected-color-info');
      const labEl = document.getElementById('cmw-selected-color-lab');
      
      if (labValues && info && labEl) {
        info.classList.add('show');
        labEl.textContent = `L*: ${labValues[0].toFixed(1)}, a*: ${labValues[1].toFixed(1)}, b*: ${labValues[2].toFixed(1)}`;
      } else if (info) {
        info.classList.remove('show');
      }
    }

    // Display results in table
    function displayResults(results) {
      const table = document.getElementById('cmw-out');
      const tbody = table?.querySelector('tbody');
      
      if (!table || !tbody) return;
      
      tbody.innerHTML = '';
      
      if (!results || results.length === 0) {
        showStatus('No matches found', 'warning');
        table.hidden = true;
        return;
      }
      
      results.forEach(match => {
        const row = tbody.insertRow();
        
        // Swatch
        const swatchCell = row.insertCell();
        const swatch = document.createElement('div');
        swatch.className = 'cmw-swatch';
        swatch.style.backgroundColor = match.hex;
        swatchCell.appendChild(swatch);
        
        // Name
        row.insertCell().textContent = match.name;
        
        // Brand
        row.insertCell().textContent = match.brand || match.family || 'N/A';
        
        // Delta E
        row.insertCell().textContent = match.delta_e?.toFixed(2) || 'N/A';
        
        // Lab
        const labCell = row.insertCell();
        if (match.lab) {
          labCell.textContent = `L*:${match.lab[0].toFixed(1)} a*:${match.lab[1].toFixed(1)} b*:${match.lab[2].toFixed(1)}`;
        } else {
          labCell.textContent = 'N/A';
        }
      });
      
      table.hidden = false;
      showStatus(`Found ${results.length} matches!`);
    }

    // Handle search
    async function handleSearch() {
      const searchType = document.getElementById('cmw-search-type-select')?.value || 'name';
      
      let inputType, value;
      
      if (searchType === 'name') {
        const input = document.getElementById('cmw-name-input');
        if (!input || !input.value.trim()) {
          showStatus('Please enter a color name or hex code', 'warning');
          return;
        }
        
        value = input.value.trim();
        
        // Detect if it's a hex code
        if (value.startsWith('#') || /^[0-9A-Fa-f]{6}$/.test(value)) {
          inputType = 'hex';
          value = value.startsWith('#') ? value : `#${value}`;
        } else {
          inputType = 'bastone';
        }
        
      } else if (searchType === 'lab') {
        const l = document.getElementById('cmw-lab-l')?.value;
        const a = document.getElementById('cmw-lab-a')?.value;
        const b = document.getElementById('cmw-lab-b')?.value;
        
        if (!l || !a || !b) {
          showStatus('Please enter all Lab values', 'warning');
          return;
        }
        
        inputType = 'lab';
        value = `${l},${a},${b}`;
        
      } else if (searchType === 'rgb') {
        const r = document.getElementById('cmw-rgb-r')?.value;
        const g = document.getElementById('cmw-rgb-g')?.value;
        const b = document.getElementById('cmw-rgb-b')?.value;
        
        if (!r || !g || !b) {
          showStatus('Please enter all RGB values', 'warning');
          return;
        }
        
        inputType = 'rgb';
        value = `${r},${g},${b}`;
        
      } else if (searchType === 'cmyk') {
        showStatus('CMYK not yet implemented. Use hex or RGB.', 'warning');
        return;
      }
      
      try {
        showLoading(true);
        
        // First, get the input color converted to Lab from backend
        const result = await callColorMatchAPI(inputType, value);
        
        if (result.input?.hex) {
          updateColorPreview(result.input.hex, result.input.lab);
        }
        
        // Combine backend matches with library matches
        let allMatches = result.matches || [];
        
        // Search through loaded libraries
        if (result.input?.lab) {
          const targetLab = result.input.lab;
          
          // Check which libraries are enabled
          const enabledLibraries = [];
          ['pantone', 'behr', 'sherwin', 'bm'].forEach(lib => {
            const checkbox = document.getElementById(`toggle-${lib}`);
            if (checkbox && checkbox.checked && libs[lib]) {
              enabledLibraries.push(lib);
            }
          });
          
          // Get results count preference
          const resultsPerLibrary = parseInt(document.getElementById('cmw-results-count')?.value || '1');
          
          // Search each enabled library
          enabledLibraries.forEach(libraryName => {
            const colors = libs[libraryName];
            if (!colors) return;
            
            // Calculate Delta E for each color
            const libraryMatches = colors.map(color => {
              const deltaE = calculateDeltaE(targetLab, color.lab);
              return {
                ...color,
                library: libNames[libraryName],
                brand: libNames[libraryName],
                delta_e: deltaE
              };
            });
            
            // Sort by Delta E and take top N
            libraryMatches.sort((a, b) => a.delta_e - b.delta_e);
            allMatches = allMatches.concat(libraryMatches.slice(0, resultsPerLibrary));
          });
          
          // Sort all matches by Delta E
          allMatches.sort((a, b) => a.delta_e - b.delta_e);
        }
        
        showLoading(false);
        
        if (allMatches.length > 0) {
          displayResults(allMatches);
        } else {
          showStatus('No matches found', 'warning');
        }
        
      } catch (error) {
        showLoading(false);
        console.error('Search error:', error);
      }
    }
    
    // Calculate Delta E between two Lab colors
    function calculateDeltaE(lab1, lab2) {
      const dL = lab2[0] - lab1[0];
      const da = lab2[1] - lab1[1];
      const db = lab2[2] - lab1[2];
      return Math.sqrt(dL * dL + da * da + db * db);
    }

    // Handle input type selector change
    function handleInputTypeChange() {
      const searchType = document.getElementById('cmw-search-type-select')?.value;
      
      document.querySelectorAll('.cmw-value-inputs').forEach(el => {
        el.classList.remove('active');
      });
      
      const inputGroups = {
        'name': 'cmw-name-inputs',
        'lab': 'cmw-lab-inputs',
        'rgb': 'cmw-rgb-inputs',
        'cmyk': 'cmw-cmyk-inputs'
      };
      
      const targetId = inputGroups[searchType];
      if (targetId) {
        document.getElementById(targetId)?.classList.add('active');
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      const searchBtn = document.getElementById('cmw-search-btn');
      if (searchBtn) searchBtn.addEventListener('click', handleSearch);
      
      const searchTypeSelect = document.getElementById('cmw-search-type-select');
      if (searchTypeSelect) searchTypeSelect.addEventListener('change', handleInputTypeChange);
      
      document.querySelectorAll('.cmw-value-inputs input').forEach(input => {
        input.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') handleSearch();
        });
      });
      
      console.log('🎨 BOTM Color Match Widget initialized');
      console.log('API Base URL:', API_BASE_URL);
      
      // Load color libraries from backend
      loadAllLibraries();
      
      showStatus('Color Match system ready! Try entering a hex color like #FFC845', 'success');
    });
  </script>

</body>
</html>
